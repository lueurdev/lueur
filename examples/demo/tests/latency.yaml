title: "Increased Latency Test"
description: "Upstream service responding with a latency of around 300ms should not impact our service response"
scenarios:
  - call:
      method: GET
      url: http://localhost:7070/ping
    context:
      upstreams:
        - https://postman-echo.com
      fault:
        type: latency
        mean: 10
        direction: egress
      strategy:
        mode: Repeat
        failfast: true
        step: 100
        count: 3
        wait: 100
    expect:
      status: 200
      response_time_under: 200
  - call:
      method: GET
      url: http://localhost:7070/
    context:
      upstreams:
        - http://localhost:7070
      fault:
        type: latency
        mean: 300
        max: 500
    expect:
      status: 200
      response_time_under: 500
  - call:
      method: GET
      url: http://localhost:7070/multi
    context:
      upstreams:
        - https://postman-echo.com
        - https://www.example.com
      fault:
        type: latency
        mean: 300
        max: 500
    expect:
      status: 200
      response_time_under: 500
